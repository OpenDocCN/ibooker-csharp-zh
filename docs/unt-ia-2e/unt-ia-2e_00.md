# 前言

## 前言

我从 1982 年开始编程游戏。这并不容易。我们没有互联网。资源仅限于几本大多数都很糟糕的书和杂志，它们提供了迷人的但令人困惑的代码片段，至于游戏引擎——好吧，根本就没有！编写游戏是一场巨大的艰难斗争。

我多么羡慕你，读者，手中握着这本书的力量。Unity 引擎为许多人打开了游戏编程的大门。Unity 通过成为一个强大、专业的游戏引擎，同时仍然对初学者来说既负担得起又易于接近，成功地实现了卓越的平衡。

也就是说，在正确的指导下。我曾经在一个由魔术师管理的马戏团中度过了一段时间。他足够善良，收留了我，并帮助我成为一名优秀的表演者。“当你站在舞台上，”他宣布，“你做出了一份承诺。而这个承诺就是‘我不会浪费你的时间。’”

我最喜爱《Unity in Action》这本书的地方就是它的“行动”部分。乔·霍金（Joe Hocking）不会浪费你任何时间，他会让你快速进入编码状态——而且不仅仅是无意义的代码，而是你可以理解并从中构建的有趣代码，因为他知道你不仅仅想读他的书，也不仅仅想编写他的示例代码——你想要编写的是你自己的游戏。

在他的指导下，你将能够比你预期的更快地做到这一点。跟随乔的步骤，但当你觉得准备好了，不要害羞地偏离他的道路，独立前行。跳到你最感兴趣的部分——尝试实验，大胆而勇敢！如果你迷失了方向，你总是可以回到文本。

但让我们不要在这个前言中拖延时间——整个游戏开发的未来都在迫不及待地等待你开始！在你的日历上标记这一天，因为今天是一切改变的日子。它将永远被铭记为你开始制作游戏的那一天。

——杰西·谢尔（Jesse Schell），Schell Games 的首席执行官，《游戏设计艺术》的作者

## 前言

我已经编程游戏有一段时间了，但直到相对较晚才开始使用 Unity。当我最初开始开发游戏时，Unity 还不存在；它的第一个版本是在 2005 年发布的。从一开始，它作为游戏开发工具就有着很大的潜力，但直到几个版本之后才真正崭露头角。特别是，像 iOS 和 Android（统称为*移动*）这样的平台直到后来才出现，而这些平台在 Unity 日益显著的地位中起到了重要作用。

最初，我把 Unity 看作是一种好奇心，一个值得关注的有趣开发工具，但并不真正使用。在那段时间里，我为桌面电脑和网站编写游戏，并为各种客户做项目。我使用像 Blitz3D 和 Adobe Flash 这样的工具，编程起来很棒，但在很多方面都有局限性。随着这些工具开始显得过时，我一直寻找更好的游戏开发方法。

我大约从 Unity 的 3.0 版本开始尝试使用它，然后完全转向它来为 Synapse Games 的开发工作服务。最初，我在 Synapse 公司做网页游戏，但最终我们转向了移动游戏。然后我们又回到了起点，因为 Unity 使我们能够从单一代码库部署到网页和移动设备！

我一直认为分享知识非常重要，并且已经教授游戏开发课程好几年了。我这样做的一个很大原因是我众多导师和老师树立的榜样。（顺便说一句，你可能听说过我的其中一位老师，因为他是一个非常鼓舞人心的人：兰迪·波许在 2008 年去世前不久发表了“最后的演讲”。）我在几所学校教授过课程，并且一直想写一本关于游戏开发的书。

在很多方面，我写在这里的内容是我希望在我最初学习 Unity 时就能存在的书。Unity 的众多优点之一是拥有一个巨大的学习资源宝库，但这些资源往往以不集中的片段形式存在（如脚本参考或独立的教程），需要大量挖掘才能找到你需要的东西。理想情况下，我会有一本书，把所有我需要知道的内容集中在一个地方，并以清晰和逻辑的方式呈现，所以现在我为你们写这样一本书。我针对的是那些已经知道如何编程但却是 Unity 新手的读者，也许也是游戏开发的新手。项目选择反映了我在快速连续完成各种自由职业项目的过程中获得技能和自信的经验。

在学习使用 Unity 开发游戏的过程中，你正在踏上一次激动人心的冒险之旅。对我来说，学习如何开发游戏意味着要忍受很多麻烦。而你们，则有一个单一连贯的资源可以学习：这本书！

## 致谢

我想感谢 Manning Publications 给我机会写这本书。与我合作的编辑，包括 Robin de Jongh 和特别感谢 Dan Maharry，在整个过程中帮助了我，他们的反馈使这本书更加完善。Becky Whitney 接管了这本书第三版的主要编辑工作，而 Candace West 在第二版中担任这一角色。我还要衷心感谢在本书的开发和生产过程中与我合作的许多人：Deirdre Hiam，项目编辑；Sharon Wilkey，校对编辑；Jason Everett，校对；以及 Mihaela Batinić，审阅编辑。

我的写作在每一步都受益于审稿人的严格审查。感谢 Aharon Sharim Rani、Alain Couniot、Alain Lompo、Alberto Simões、Bradley Irby、Brent Boylan、Chris Lundberg、Cristian Antonioli、David Moskowitz、Erik Hansson、Francesco Argese、Hilde Van Gysel、James Matlock、Jan Kroken、John Ackley、John Guthrie、Jose San Leandro、Joseph W. White、Justin Calleja、Kent R. Spillner、Krishna Chaitanya Anipindi、Martin Tidman、Max Weinbrown、Nenko Ivanov Tabakov、Nick Keers、Owain Williams、Robert Walsh、Satej Kumar Sahu、Scott Chaussée 和 Walter Stoneburner。特别感谢技术发展编辑 Scott Chaussee 和校对 Christopher Haupt 的技术审稿工作。René van den Berg 和 Shiloh Morris 在第二版中承担了这些角色，而 René在第三版中担任技术校对，Robin Dewson 进行了技术编辑。我还想感谢 Jesse Schell 为我的书撰写序言。

接下来，我想感谢那些使我的 Unity 体验变得富有成效的人。当然，这始于 Unity Technologies 公司，它是 Unity（游戏引擎）的制造商。我也感激 Stack Exchange 上的游戏开发社区([`gamedev.stackexchange.com`](https://gamedev.stackexchange.com))；在撰写第一版时，我几乎每天都访问那个问答网站，从他人那里学习并回答问题。而我使用 Unity 的最大推动力来自 Synapse Games 的老板 Alex Reeve。同样，我也从我的同事那里学到了技巧和技术，无论是在那个工作还是在之后我所持有的每一个工作中，它们都体现在我写的代码中。

最后，我想感谢我的妻子，弗吉尼亚，在我写书期间她的支持。在我开始工作之前，我从未真正理解一个书项目会占据你多少生活，以及它如何影响你周围的人。非常感谢你的爱和鼓励。

## 关于本书

### 应该阅读这本书的人

*Unity in Action, 第三版* 是一本关于在 Unity 中编程游戏的书。把它看作是经验丰富的程序员的 Unity 入门。本书的目标非常明确：将一些编程经验但没有 Unity 经验的人，教会他们如何使用 Unity 开发游戏。

最佳的教学发展方式是通过示例项目，让学生通过实践学习，这正是本书所采用的方法。我将把主题作为构建示例游戏的步骤来介绍，并鼓励你在探索本书的同时在 Unity 中构建这些游戏。我们将在每几章中通过一系列项目，而不是在整个书中开发一个单一的项目。（有时其他书籍采用“单一项目”的方法，但如果你对早期章节不感兴趣，这可能会让你难以从中跳入。）

这本书的编程内容比大多数 Unity 书籍（尤其是初学者书籍）都要严格。Unity 经常被描绘为不需要编程功能列表，这是一个误导性的观点，它不会教人们他们需要知道的内容，以便制作商业游戏。如果你还不懂得如何编程计算机，我建议你访问各种“免费互动编码课程”网站（例如[`learnprogramming.online`](https://learnprogramming.online)），然后在学会编程后回来阅读这本书。

不要担心确切的编程语言；本书中使用了 C#，但其他语言的知识也能很好地迁移。尽管本书的前部分花时间介绍新概念，并会仔细地引导你开发第一个 Unity 游戏，但剩余的章节会更快地移动，以便带你通过多个游戏类型的多个项目。本书以一个章节描述部署到各种平台，包括网页和移动设备，但本书的主要内容并不针对最终的部署目标，因为 Unity 非常平台无关。

至于游戏开发的其它方面，广泛的艺术学科覆盖会削弱本书的覆盖范围，并且大部分内容将关于 Unity 之外（例如，动画软件）的软件。艺术任务的讨论将限于 Unity 特定或所有游戏开发者都应该知道的部分。（注意，然而，附录 C 是关于自定义对象建模的。）

### 本书是如何组织的：一个路线图

第一章介绍了 Unity，这个跨平台的游戏开发环境。你将了解 Unity 中一切的基础组件系统，以及如何编写和执行基本脚本。

第二章进展到编写 3D 移动演示，涵盖了鼠标和键盘输入等主题。定义和操作 3D 位置和旋转被彻底解释。

第三章将移动演示转变为第一人称射击游戏，教你射线投射和基本人工智能。射线投射（向场景中发射一条线并查看它与什么相交）是各种游戏中有用的操作。

第四章涵盖了导入和创建艺术资源。这是本书中唯一不专注于代码的章节，因为每个项目都需要（基本的）模型和纹理。

第五章教你如何在 Unity 中创建一个 2D 益智游戏。尽管 Unity 最初是专为 3D 图形设计的，但现在它对 2D 图形的支持非常出色。

第六章扩展了 2D 游戏解释，加入了平台游戏机制。特别是，我们将为玩家实现控制、物理和动画。

第七章介绍了 Unity 中最新的 GUI 功能。每个游戏都需要一个用户界面，Unity 的最新版本提供了一个改进的创建 UI 的系统。

第八章展示了如何创建另一个 3D 动作演示，这次仅从第三人称视角观看。实现第三人称控制将演示关键的 3D 数学运算，您还将学习如何与动画角色协同工作。

第九章介绍了如何在您的游戏中实现交互式设备和物品。玩家将有多种操作这些设备的方式，包括直接触摸它们，触摸游戏中的触发器，或者在控制器上按按钮。

第十章涵盖了如何与互联网进行通信。您将学习如何通过使用标准互联网技术，如 HTTP 请求从服务器获取 XML 或 JSON 数据来发送和接收数据。

第十一章教授如何编程音频功能。Unity 对短音效和长音乐曲目都有很好的支持；这两种类型的音频对于几乎所有的视频游戏都至关重要。

第十二章将指导您将不同章节的内容整合成一个单一的游戏。此外，您还将学习如何编写点按控制程序以及如何保存玩家的游戏。

第十三章介绍了构建最终应用程序的方法，包括部署到桌面、网络、移动甚至 VR 等多个平台。Unity 使您能够为每个主要游戏平台创建游戏！

四个附录提供了有关场景导航、外部工具、Blender 和学习资源的额外信息。

### 关于代码

书中的所有源代码，无论是在代码列表还是代码片段中，都使用固定宽度字体，如这样，使其与周围文本区分开来。在大多数列表中，代码都有注释来指出关键概念。代码格式化得很好，以便在书中的可用页面空间内适应，通过添加换行和仔细使用缩进来实现。

所需的唯一软件是 Unity；本书使用 Unity 2020.3.12，这是我撰写本书时的当前默认版本。某些章节偶尔会讨论其他软件，但这些被视为可选的额外内容，而不是您学习的主要内容。

警告：Unity 项目会记住它们是在哪个版本的 Unity 中创建的，如果您尝试在另一个版本中打开它们，将会发出警告。如果在打开本书的示例下载时看到该警告，请点击继续并忽略它。

书中散布的代码列表通常显示在现有代码文件中需要添加或更改的内容；除非是某个代码文件首次出现，否则不要用后续列表替换整个文件。虽然您可以下载完整的可工作示例项目进行参考，但通过输入代码列表并查看工作样本来学习是最好的。这些下载可以从出版社的网站([`www.manning.com/books/unity-in-action-third-edition`](https://www.manning.com/books/unity-in-action-third-edition))和 GitHub([`github.com/jhocking/uia-3e`](https://github.com/jhocking/uia-3e))获取。

### liveBook 讨论论坛

购买《Unity in Action, 第三版》包括对 Manning 的在线阅读平台 liveBook 的免费访问。使用 liveBook 的独特讨论功能，您可以在全球范围内或针对特定章节或段落添加评论。为自己做笔记、提问和回答技术问题，以及从作者和其他用户那里获得帮助都非常简单。要访问论坛，请访问[`livebook.manning.com/#!/book/unity-in-action-third-edition/discussion`](https://livebook.manning.com/#!/book/unity-in-action-third-edition/discussion)。您还可以在[`livebook.manning.com/#!/discussion`](https://livebook.manning.com/#!/discussion)了解更多关于 Manning 的论坛和行为准则。

Manning 对读者的承诺是提供一个平台，让读者之间以及读者与作者之间可以进行有意义的对话。这不是对作者参与特定数量活动的承诺，作者对论坛的贡献仍然是自愿的（且未付费）。我们建议您尝试向作者提出一些挑战性的问题，以免他的兴趣转移！只要书籍在印刷中，论坛和先前讨论的存档将可通过出版社的网站访问。

## 关于作者

Joe Hocking 是一位专注于互动媒体开发的软件工程师。他目前供职于高通公司，在为 BUNDLAR 工作期间编写了第三版的大部分内容，而在 Synapse Games 工作期间编写了第一版。他还曾在伊利诺伊大学芝加哥分校、芝加哥艺术学院和哥伦比亚学院教授课程。他与妻子和两个孩子住在芝加哥郊外。他的网站是[www.newarteest.com](http://www.newarteest.com)。

## 关于封面插图

《Unity in Action, 第三版》封面上的插图标题为“大苏丹的司仪习惯”。大苏丹是奥斯曼帝国苏丹的另一个称呼。这幅插图取自托马斯·杰弗里斯的《不同国家古今服饰汇编》，由伦敦 1757 年至 1772 年间出版。扉页声明这些是手工着色的铜版雕刻，用阿拉伯树胶增强。杰弗里斯（1719-1771）被称为“乔治三世的地理学家”。他是当时的领先地图供应商，为政府和其它官方机构雕刻和印刷地图，并制作了各种商业地图和地图集，尤其是北美地区的。他作为地图制作者的工作激发了他对所调查地区的当地服饰习俗的兴趣，这些习俗在这四卷集中得到了精彩的展示。

对遥远土地的迷恋和为了娱乐而旅行在 18 世纪末是相对较新的现象，像这样的收藏品在当时很受欢迎，它们向游客和沙发旅行者介绍了其他国家的居民。杰弗里斯作品中的插图多样性生动地描绘了大约 200 年前世界各国独特性和个性的多样性。自那时以来，着装规范已经改变，当时丰富多样的地区和国家多样性已经逐渐消失。现在很难区分一个大陆的居民与另一个大陆的居民。或许，如果我们乐观地看待这个问题，我们是以文化和视觉多样性换取了更加丰富多彩的个人生活，或者更加丰富多彩和有趣的智力和技术生活。

在难以区分一本计算机书籍与另一本的时候，曼宁通过书籍封面上的设计，庆祝了计算机行业的创新和进取精神。这些设计基于两百年前丰富多样的地区生活，通过杰弗里斯的画作得以重现。
