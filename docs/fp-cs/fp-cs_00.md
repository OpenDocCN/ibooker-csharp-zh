# 前言

函数式编程（FP）是软件开发历史上最伟大的创新之一，它也很酷。同样有趣。不仅如此，它每年都在增长。

我尽可能经常参加开发者会议，并且我注意到一个趋势。每年，关于函数式编程的内容总是越来越多，而不是越来越少。甚至通常会有一个完整的轨道专门讨论它，其他讲座中也经常包含函数式编程内容作为讨论的一个点。

它正在慢慢地变得非常重要。为什么呢？

随着容器化和无服务器应用程序等概念的增长，函数式编程不仅仅是开发者空闲项目的一点乐趣；它不是几年后就会被遗忘的时尚。它真正有利于为我们的利益相关者带来益处。

在 .NET 世界中有几个额外因素在起作用。

C# 首席设计师 Mads Torgerson 本人也是函数式编程的粉丝，也是将函数式范式引入 .NET 背后的主要推动力之一。还有 F# - .NET 的函数式语言。F# 和 C# 共享一个通用运行时，因此 F# 团队请求的许多函数特性最终也以某种形式在 C# 中得到实现。

但是一个重要的问题是 - 它是什么？而且¹，我需要学习一个全新的编程语言才能使用它吗？好消息是，如果你是 .NET 开发者，那么你不需要花大量时间学习新技术来跟上时代 - 你甚至不需要投资于另一个第三方库以增加应用程序的依赖关系 - 这一切都可以通过现成的 C# 代码实现 - 尽管可能需要进行一些调整。

本书将介绍函数式编程的所有基本概念，展示它们的好处，以及如何在 C# 中实现它们 - 不仅仅是为了你自己的业余编程，还着眼于如何在你的工作生活中立即获得益处。

# 谁应该阅读本书？

本书面向开发者 - 无论是专业人士、学生还是业余爱好者 - 他们已经对 C# 有了基础了解。你不需要成为专家，但需要熟悉基础知识，并且能够至少简单地组合一个 C# 应用程序。

这本书还将涵盖一些更高级的 .NET 主题，但在出现时我会提供解释。

这本书是为几类人写的：

+   那些已经学习了 C# 基础知识，但希望找到进一步学习的途径。学习更高级的技术，写出更好、更健壮的代码。

+   .NET 开发者听说过函数式编程，甚至可能知道它是什么，但想知道如何在 C# 中开始写这种方式的代码。

+   F# 开发者寻找继续使用你习惯的功能玩具的方法。

+   那些从另一种函数式或支持函数式语言（如 Java）迁移到.NET 的人。

+   任何真正热爱编码的人。如果你整天在办公室写代码，然后回家继续写，那么这本书可能适合你。

# 为什么我写了这本书

我对编程感兴趣已经很久了。当我还是个小男孩时，我们有一台 ZX Spectrum - 这是 Sinclair Research 在 80 年代初开发的一款早期英国家用电脑。如果有人记得 Commodore 64，它有点像那个，但原始得多。它只有 15 种颜色² - 其中一种是黑色。我有更先进的型号，有 48k 内存，虽然我爸爸有早期型号 - ZX81 - 它只有 1k 内存（还有橡胶键）。它甚至不能有有颜色的字符精灵，只能有屏幕上的区域，所以你的游戏角色会根据他们站在前面的东西的颜色改变颜色。简而言之，它简直是黑科技中的极品。

其中最好的一点是，它具有一个基于文本的编程接口的操作系统，加载游戏需要使用代码（从盒式磁带，使用命令 LOAD ""），但也有为孩子们准备的杂志和书籍，其中包含可供自行输入的游戏代码，正是从这些杂志和书籍中，我对计算机代码的奥秘产生了持久的痴迷。非常感谢，Usbourne Publishing！

大约在我 14 岁左右时，学校的一个基于计算机的职业建议程序建议我考虑从事软件开发职业。这是我第一次意识到，你可以将这种愚蠢的爱好变成实际可以赚钱的东西！

大学毕业后，是时候找份正式工作了，那时我第一次接触到了 C#。所以，接下来的步骤，我想，就是学习如何*正确地*开发代码。简单吧？说实话，将近 20 年过去了，我仍在努力摸索。

在我编程生涯中的一个重大转折点是，我参加了挪威的开发者会议，终于开始理解我一直听说的“函数式编程”究竟是什么。函数式代码优雅、简洁，易于阅读，这是其他形式的代码所不具备的特点。像任何类型的代码一样，仍然有可能编写看起来很糟糕的代码库，但它从根本上感觉就像是终于以*正确*的方式编写代码，这是其他编码风格从未给予我的感觉。希望在阅读本书后，你不仅会同意这一点，还会对探索更多其他方式感兴趣。

# 阅读本书指南

这本书的组织方式如下：

介绍了什么是函数式编程，它的来源以及为什么我们中的任何人都应该对它感兴趣。我认为它为我们的雇主带来了重大的商业利益，并且这是值得添加到您的开发者工具包中的技能。

+   第一章讨论了您可以立即开始在 C#中以函数式编程方式编码的方法，而无需引用任何新的 Nuget 包，第三方库或使用语言进行 hack。本章中的几乎所有示例都适用于自 C#版本 3 以来的几乎每个版本。本章代表了函数式编程的第一步，所有代码都相当简单，但为即将到来的内容奠定了基础。

+   第二章提供了一些稍微不太常规的方法来看待我们在 C#中已经可用的结构。它包括了将函数式范式推向更高级别的方法。在这一点上，仍然没有额外的代码依赖性，但是事情开始在这里看起来有点不同寻常。

+   第 4 至 7 章分别展示了函数式编程范式的一个组成部分，以及如何在 C#中实现它。在这些章节中，我们开始稍微调整 C#的结构。

+   第 8 和 9 章更多地讨论了在商业环境中使用函数式 C#的实际问题。

随时根据您准备好的水平深入研究。这不是一本小说³，按照您认为合理的顺序阅读章节。

# 致谢

我应该首先感谢的人是凯瑟琳·多拉德。几年前，她在 NDC Oslo 发表了一场名为“C#的函数式技术”的演讲。这是我第一次真正接触到函数式编程，这是我曾经有过的第一个真正的启发，[真是令人大开眼界（https://www.youtube.com/watch?v=rHmIf5xmKQg）](https://www.youtube.com/watch?v=rHmIf5xmKQg)。

我在这条道路上跟随的另一位大师是恩里科·布安诺，他的书“C#中的函数式编程”（ISBN：978-1617293955）是我第一次真正理解一些难以理解的函数式概念是如何工作的。

伊恩·拉塞尔，马修·弗莱彻，利亚姆·莱利，马克斯·迪茨，史蒂夫“Talks Code”柯林斯，杰拉尔多·利斯，马特·伊兰德，拉胡尔·纳特，西瓦·古迪瓦达，克里斯蒂安·霍斯达尔，马丁·富斯，戴夫·麦科洛，塞巴斯蒂安·罗宾斯，大卫·谢弗，彼得·德·坦德，马克·西曼阅读了初稿并提供了宝贵的反馈。谢谢，伙计们！

我的编辑，吉尔·莱昂纳德。她必须有耐心像圣人一样忍受我整整一年！

# 本书使用的约定

本书中使用了以下排版约定：

*Italic*

表示新术语，URL，电子邮件地址，文件名和文件扩展名。

`Constant width`

用于程序清单，以及在段落中引用程序元素，如变量或函数名称，数据库，数据类型，环境变量，语句和关键字。

**`Constant width bold`**

显示用户应该按照字面意思输入的命令或其他文本。

*`Constant width italic`*

显示应该被用户提供的值或上下文确定的值替换的文本。

###### 提示

此元素表示提示或建议。

###### 注意

此元素表示一般注释。

###### 警告

此元素指示警告或注意事项。

# 使用代码示例

补充材料（代码示例、练习等）可以在即将到来的链接下载。

如果您有关于代码示例的技术问题或使用问题，请发送电子邮件至*bookquestions@oreilly.com*。

本书旨在帮助您完成工作。一般情况下，如果本书提供示例代码，您可以在您的程序和文档中使用它。除非您复制了大部分代码，否则无需获得我们的许可。例如，编写一个使用本书多个代码片段的程序不需要许可。销售或分发 O’Reilly 图书的示例代码需要许可。引用本书并引用示例代码来回答问题不需要许可。将本书大量示例代码整合到产品文档中需要许可。

我们感谢，但通常不需要归属。归属通常包括标题、作者、出版商和 ISBN。例如：“*Functional Programming with C#* by Simon J. Painter (O’Reilly). Copyright 2024 Simon Painter, 978-1-492-09707-5.”

如果您认为您使用的代码示例超出了公平使用范围或上述许可，请随时通过*permissions@oreilly.com*联系我们。

# O’Reilly 在线学习

###### 注意

超过 40 年来，[*O’Reilly Media*](http://oreilly.com) 提供技术和业务培训、知识和见解，帮助企业成功。

我们独特的专家和创新者网络通过书籍、文章和我们的在线学习平台分享他们的知识和专业知识。O’Reilly 的在线学习平台为您提供按需访问的现场培训课程、深入学习路径、交互式编码环境以及来自 O’Reilly 和 200 多个其他出版商的广泛的文本和视频。有关更多信息，请访问[*http://oreilly.com*](http://oreilly.com)。

# 如何联系我们

请将有关本书的评论和问题寄给出版商：

+   O’Reilly Media, Inc.

+   1005 Gravenstein Highway North

+   Sebastopol, CA 95472

+   800-998-9938（美国或加拿大）

+   707-829-0515（国际或本地）

+   707-829-0104（传真）

我们为这本书准备了一个网页，上面列出了勘误、示例和任何额外信息。您可以在即将到来的链接上访问这个页面。

电子邮件*bookquestions@oreilly.com* 用于对本书提出评论或技术问题。

有关我们的书籍和课程的新闻和信息，请访问[*http://oreilly.com*](http://oreilly.com)。

在 Facebook 上找到我们：[*http://facebook.com/oreilly*](http://facebook.com/oreilly)

关注我们的 Twitter：[*http://twitter.com/oreillymedia*](http://twitter.com/oreillymedia)

观看我们的 YouTube 频道：[*http://www.youtube.com/oreillymedia*](http://www.youtube.com/oreillymedia)

# 致辞

这本书献给了我的妻子，Sushma Mahadik。我的宝贝。同时也献给我的两个女儿，Sophie 和 Katie。爸爸爱你们，女孩们。

¹ 好的，**两个**问题

² 8 种基础颜色，以及每种颜色的明亮版本。其中一种是黑色，不过，地球上怎么可能有明亮的黑色！所以..15。

³ 但如果是这样，您可以保证巴特勒一定已经做到了！
