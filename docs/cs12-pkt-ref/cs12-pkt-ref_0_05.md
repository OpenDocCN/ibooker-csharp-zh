# 第五章：布尔类型和运算符

C#的`bool`类型（别名为`System.Boolean`类型）是一个逻辑值，可以赋予`true`或`false`字面值。

尽管布尔值仅需要一位存储空间，但运行时会使用一个字节的内存，因为这是运行时和处理器能有效处理的最小块。为了避免在数组情况下的空间浪费，.NET 在`System.Collections`命名空间中提供了`BitArray`类，设计为每个布尔值仅使用一位。

## 相等性和比较运算符

`==`和`!=`分别测试任何类型的相等和不等，总是返回一个`bool`值。值类型通常具有非常简单的相等概念：

```cs
int x = 1, y = 2, z = 1;
Console.WriteLine (x == y);      // False
Console.WriteLine (x == z);      // True
```

对于引用类型，默认情况下，相等性基于*引用*，而不是底层对象的*值*。因此，除非特别重载了该类型的`==`运算符以反映这一点（参见“对象类型”和“运算符重载”），否则具有相同数据的两个对象实例不被视为相等。

相等性和比较运算符`==`、`!=`、`<`、`>`、`>=`和`<=`适用于所有数值类型，但在实数中应谨慎使用（参见上一节中的“实数舍入误差”）。比较运算符也适用于枚举类型成员，通过比较它们的基础整数值。

## 条件操作符

`&&`和`||`运算符测试*and*和*or*条件，分别。它们经常与`!`运算符一起使用，表示*not*。在以下示例中，`UseUmbrella`方法如果下雨或晴天（保护我们免受雨水或阳光），只要不刮风就返回`true`：

```cs
static bool UseUmbrella (bool rainy, bool sunny,
                         bool windy)
{
  return !windy && (rainy || sunny);
}
```

`&&`和`||`运算符在可能时会*短路*评估。在前面的示例中，如果刮风，表达式`(rainy || sunny)`甚至不会被评估。短路对于允许以下表达式运行而不抛出`NullReferenceException`至关重要：

```cs
if (sb != null && sb.Length > 0) ...
```

`&`和`|`运算符也测试*and*和*or*条件：

```cs
return !windy & (rainy | sunny);
```

它们的不同之处在于它们*不会短路*。因此，它们很少用于条件操作符的替代位置。

三元条件运算符（简称*条件运算符*）的形式为`q ? a : b`，如果条件`q`为真，则评估`a`，否则评估`b`。例如：

```cs
static int Max (int a, int b)
{
  return (a > b) ? a : b;
}
```

条件运算符在 LINQ 查询中特别有用。

